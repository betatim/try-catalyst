(()=>{"use strict";function t(t){if("clipboard"in navigator)return navigator.clipboard.writeText(t.textContent);const e=getSelection();if(null==e)return Promise.reject(new Error);e.removeAllRanges();const o=document.createRange();return o.selectNodeContents(t),e.addRange(o),document.execCommand("copy"),e.removeAllRanges(),Promise.resolve()}function e(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);const o=document.body;if(!o)return Promise.reject(new Error);const n=function(t){const e=document.createElement("pre");return e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="5px",e.textContent=t,e}(e);return o.appendChild(n),t(n),o.removeChild(n),Promise.resolve()}function o(o){const n=o.getAttribute("for"),r=o.getAttribute("value");function i(){o.dispatchEvent(new CustomEvent("clipboard-copy",{bubbles:!0}))}if(r)e(r).then(i);else if(n){const r="getRootNode"in Element.prototype?o.getRootNode():o.ownerDocument;if(!(r instanceof Document||"ShadowRoot"in window&&r instanceof ShadowRoot))return;const c=r.getElementById(n);c&&(s=c,s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement?e(s.value):s instanceof HTMLAnchorElement&&s.hasAttribute("href")?e(s.href):t(s)).then(i)}var s}function n(t){const e=t.currentTarget;e instanceof HTMLElement&&o(e)}function r(t){if(" "===t.key||"Enter"===t.key){const e=t.currentTarget;e instanceof HTMLElement&&(t.preventDefault(),o(e))}}function i(t){t.currentTarget.addEventListener("keydown",r)}function s(t){t.currentTarget.removeEventListener("keydown",r)}class ClipboardCopyElement extends HTMLElement{constructor(){super(),this.addEventListener("click",n),this.addEventListener("focus",i),this.addEventListener("blur",s)}connectedCallback(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}get value(){return this.getAttribute("value")||""}set value(t){this.setAttribute("value",t)}}window.customElements.get("clipboard-copy")||(window.ClipboardCopyElement=ClipboardCopyElement,window.customElements.define("clipboard-copy",ClipboardCopyElement));const c=new WeakSet;function a(t){u(t),d(t)}const l=new WeakMap;function d(t=document){if(l.has(t))return l.get(t);let e=!1;const o=new MutationObserver((t=>{for(const e of t)if("attributes"===e.type&&e.target instanceof Element)h(e.target);else if("childList"===e.type&&e.addedNodes.length)for(const t of e.addedNodes)t instanceof Element&&u(t)}));o.observe(t,{childList:!0,subtree:!0,attributeFilter:["data-action"]});const n={get closed(){return e},unsubscribe(){e=!0,l.delete(t),o.disconnect()}};return l.set(t,n),n}function u(t){for(const e of t.querySelectorAll("[data-action]"))h(e);t instanceof Element&&t.hasAttribute("data-action")&&h(t)}function f(t){const e=t.currentTarget;for(const o of p(e))if(t.type===o.type){const n=e.closest(o.tag);c.has(n)&&"function"==typeof n[o.method]&&n[o.method](t);const r=e.getRootNode();if(r instanceof ShadowRoot&&c.has(r.host)&&r.host.matches(o.tag)){const e=r.host;"function"==typeof e[o.method]&&e[o.method](t)}}}function*p(t){for(const e of(t.getAttribute("data-action")||"").trim().split(/\s+/)){const t=e.lastIndexOf(":"),o=e.lastIndexOf("#");yield{type:e.slice(0,t),tag:e.slice(t+1,o),method:e.slice(o+1)}}}function h(t){for(const e of p(t))t.addEventListener(e.type,f)}const b=new WeakMap;function m(t){return`data-${t.replace(/([A-Z]($|[a-z]))/g,"-$1")}`.replace(/--/g,"-").toLowerCase()}var g=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};let y=class HelloWorldElement extends HTMLElement{connectedCallback(){this.innerHTML="Hello World!",console.log("hellllooooooooo ðŸ‘‹")}};y=g([function(t){const e=t.prototype.connectedCallback;t.prototype.connectedCallback=function(){this.toggleAttribute("data-catalyst",!0),function(t){for(const e of t.querySelectorAll("template[data-shadowroot]"))e.parentElement===t&&t.attachShadow({mode:"closed"===e.getAttribute("data-shadowroot")?"closed":"open"}).append(e.content.cloneNode(!0))}(this),function(t,e){e||(e=b.get(Object.getPrototypeOf(t))||[]);for(const o of e){const e=t[o],n=m(o);let r={get(){return this.getAttribute(n)||""},set(t){this.setAttribute(n,t||"")}};"number"==typeof e?r={get(){return Number(this.getAttribute(n)||0)},set(t){this.setAttribute(n,t)}}:"boolean"==typeof e&&(r={get(){return this.hasAttribute(n)},set(t){this.toggleAttribute(n,t)}}),Object.defineProperty(t,o,r),o in t&&!t.hasAttribute(n)&&r.set.call(t,e)}}(this),function(t){c.add(t),t.shadowRoot&&a(t.shadowRoot),u(t),d(t.ownerDocument)}(this),e&&e.call(this),this.shadowRoot&&a(this.shadowRoot)},function(t){let e=t.observedAttributes||[];Object.defineProperty(t,"observedAttributes",{get(){const o=b.get(t.prototype);return o?o.map(m).concat(e):e},set(t){e=t}})}(t),function(t){const e=t.name.replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/(^-|-Element$)/g,"").toLowerCase();window.customElements.get(e)||(window[t.name]=t,window.customElements.define(e,t))}(t)}],y)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cnlpbmdfY2F0YWx5c3QvLi9ub2RlX21vZHVsZXMvQGdpdGh1Yi9jbGlwYm9hcmQtY29weS1lbGVtZW50L2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3RyeWluZ19jYXRhbHlzdC8uL25vZGVfbW9kdWxlcy9AZ2l0aHViL2NhdGFseXN0L2xpYi9iaW5kLmpzIiwid2VicGFjazovL3RyeWluZ19jYXRhbHlzdC8uL25vZGVfbW9kdWxlcy9AZ2l0aHViL2NhdGFseXN0L2xpYi9hdHRyLmpzIiwid2VicGFjazovL3RyeWluZ19jYXRhbHlzdC8uL3NyYy9IZWxsb1dvcmxkRWxlbWVudC50cyIsIndlYnBhY2s6Ly90cnlpbmdfY2F0YWx5c3QvLi9ub2RlX21vZHVsZXMvQGdpdGh1Yi9jYXRhbHlzdC9saWIvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly90cnlpbmdfY2F0YWx5c3QvLi9ub2RlX21vZHVsZXMvQGdpdGh1Yi9jYXRhbHlzdC9saWIvYXV0by1zaGFkb3ctcm9vdC5qcyIsIndlYnBhY2s6Ly90cnlpbmdfY2F0YWx5c3QvLi9ub2RlX21vZHVsZXMvQGdpdGh1Yi9jYXRhbHlzdC9saWIvcmVnaXN0ZXIuanMiXSwibmFtZXMiOlsiY29weU5vZGUiLCJub2RlIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwid3JpdGVUZXh0IiwidGV4dENvbnRlbnQiLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb24iLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJyZW1vdmVBbGxSYW5nZXMiLCJyYW5nZSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJhZGRSYW5nZSIsImV4ZWNDb21tYW5kIiwicmVzb2x2ZSIsImNvcHlUZXh0IiwidGV4dCIsImJvZHkiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwidG9wIiwiY3JlYXRlTm9kZSIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJjb3B5IiwiYnV0dG9uIiwiaWQiLCJnZXRBdHRyaWJ1dGUiLCJ0cmlnZ2VyIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsInRoZW4iLCJyb290IiwiRWxlbWVudCIsInByb3RvdHlwZSIsImdldFJvb3ROb2RlIiwib3duZXJEb2N1bWVudCIsIkRvY3VtZW50Iiwid2luZG93IiwiU2hhZG93Um9vdCIsImdldEVsZW1lbnRCeUlkIiwiY29udGVudCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50IiwidmFsdWUiLCJIVE1MQW5jaG9yRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsImhyZWYiLCJjbGlja2VkIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiSFRNTEVsZW1lbnQiLCJrZXlkb3duIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJmb2N1c2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJsdXJyZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQ2xpcGJvYXJkQ29weUVsZW1lbnQiLCJzdXBlciIsInRoaXMiLCJzZXRBdHRyaWJ1dGUiLCJjdXN0b21FbGVtZW50cyIsImdldCIsImRlZmluZSIsImNvbnRyb2xsZXJzIiwiV2Vha1NldCIsImJpbmRTaGFkb3ciLCJiaW5kRWxlbWVudHMiLCJsaXN0ZW5Gb3JCaW5kIiwib2JzZXJ2ZXJzIiwiV2Vha01hcCIsImVsIiwiaGFzIiwiY2xvc2VkIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwibXV0YXRpb24iLCJ0eXBlIiwidGFyZ2V0IiwiYmluZEFjdGlvbnMiLCJhZGRlZE5vZGVzIiwibGVuZ3RoIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJhdHRyaWJ1dGVGaWx0ZXIiLCJzdWJzY3JpcHRpb24iLCJkZWxldGUiLCJkaXNjb25uZWN0Iiwic2V0IiwicXVlcnlTZWxlY3RvckFsbCIsImhhbmRsZUV2ZW50IiwiYmluZGluZyIsImJpbmRpbmdzIiwiY29udHJvbGxlciIsImNsb3Nlc3QiLCJ0YWciLCJtZXRob2QiLCJob3N0IiwibWF0Y2hlcyIsInNoYWRvd0NvbnRyb2xsZXIiLCJhY3Rpb24iLCJ0cmltIiwic3BsaXQiLCJldmVudFNlcCIsImxhc3RJbmRleE9mIiwibWV0aG9kU2VwIiwic2xpY2UiLCJhdHRycyIsImF0dHJUb0F0dHJpYnV0ZU5hbWUiLCJuYW1lIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwiSGVsbG9Xb3JsZEVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb25zb2xlIiwibG9nIiwiY2xhc3NPYmplY3QiLCJjb25uZWN0IiwiY29ubmVjdGVkQ2FsbGJhY2siLCJ0b2dnbGVBdHRyaWJ1dGUiLCJlbGVtZW50IiwidGVtcGxhdGUiLCJwYXJlbnRFbGVtZW50IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImFwcGVuZCIsImNsb25lTm9kZSIsImF1dG9TaGFkb3dSb290IiwiaW5zdGFuY2UiLCJuYW1lcyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiZGVzY3JpcHRvciIsIm5ld1ZhbHVlIiwiTnVtYmVyIiwiZGVmaW5lUHJvcGVydHkiLCJjYWxsIiwiaW5pdGlhbGl6ZUF0dHJzIiwiYWRkIiwic2hhZG93Um9vdCIsImJpbmQiLCJvYnNlcnZlZCIsIm9ic2VydmVkQXR0cmlidXRlcyIsImF0dHJNYXAiLCJtYXAiLCJjb25jYXQiLCJhdHRyaWJ1dGVzIiwiZGVmaW5lT2JzZXJ2ZWRBdHRyaWJ1dGVzIiwicmVnaXN0ZXIiXSwibWFwcGluZ3MiOiJtQkFVQSxTQUFTQSxFQUFTQyxHQUNoQixHQUFJLGNBQWVDLFVBR2pCLE9BQU9BLFVBQVVDLFVBQVVDLFVBQVVILEVBQUtJLGFBRzVDLE1BQU1DLEVBQVlDLGVBRWxCLEdBQWlCLE1BQWJELEVBQ0YsT0FBT0UsUUFBUUMsT0FBTyxJQUFJQyxPQUc1QkosRUFBVUssa0JBQ1YsTUFBTUMsRUFBUUMsU0FBU0MsY0FLdkIsT0FKQUYsRUFBTUcsbUJBQW1CZCxHQUN6QkssRUFBVVUsU0FB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SyxLRS9EbkJDLENBQXlCL0IsR0VmdEIsU0FBa0JBLEdBQ3JCLE1BQU1QLEVBQU9PLEVBQVlQLEtBQ3BCQyxRQUFRLG9CQUFxQixPQUM3QkEsUUFBUSxrQkFBbUIsSUFDM0JDLGNBQ0E3RSxPQUFPeUIsZUFBZUMsSUFBSWlELEtBRzNCM0UsT0FBT2tGLEVBQVlQLE1BQVFPLEVBQzNCbEYsT0FBT3lCLGVBQWVFLE9BQU9nRCxFQUFNTyxJRk92Q2dDLENBQVNoQyxLRHBCUUosSSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZU5vZGUodGV4dCkge1xuICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJyk7XG4gIG5vZGUuc3R5bGUud2lkdGggPSAnMXB4JztcbiAgbm9kZS5zdHlsZS5oZWlnaHQgPSAnMXB4JztcbiAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gIG5vZGUuc3R5bGUudG9wID0gJzVweCc7XG4gIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICByZXR1cm4gbm9kZTtcbn1cblxuZnVuY3Rpb24gY29weU5vZGUobm9kZSkge1xuICBpZiAoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZsb3d0eXBlL25vLWZsb3ctZml4LW1lLWNvbW1lbnRzXG4gICAgLy8gJEZsb3dGaXhNZSBDbGlwYm9hcmQgaXMgbm90IGRlZmluZWQgaW4gRmxvdyB5ZXQuXG4gICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG5vZGUudGV4dENvbnRlbnQpO1xuICB9XG5cbiAgY29uc3Qgc2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uKCk7XG5cbiAgaWYgKHNlbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigpKTtcbiAgfVxuXG4gIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobm9kZSk7XG4gIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuZnVuY3Rpb24gY29weVRleHQodGV4dCkge1xuICBpZiAoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZsb3d0eXBlL25vLWZsb3ctZml4LW1lLWNvbW1lbnRzXG4gICAgLy8gJEZsb3dGaXhNZSBDbGlwYm9hcmQgaXMgbm90IGRlZmluZWQgaW4gRmxvdyB5ZXQuXG4gICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpO1xuICB9XG5cbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKCFib2R5KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigpKTtcbiAgfVxuXG4gIGNvbnN0IG5vZGUgPSBjcmVhdGVOb2RlKHRleHQpO1xuICBib2R5LmFwcGVuZENoaWxkKG5vZGUpO1xuICBjb3B5Tm9kZShub2RlKTtcbiAgYm9keS5yZW1vdmVDaGlsZChub2RlKTtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG5mdW5jdGlvbiBjb3B5KGJ1dHRvbikge1xuICBjb25zdCBpZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2ZvcicpO1xuICBjb25zdCB0ZXh0ID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcblxuICBmdW5jdGlvbiB0cmlnZ2VyKCkge1xuICAgIGJ1dHRvbi5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2xpcGJvYXJkLWNvcHknLCB7XG4gICAgICBidWJibGVzOiB0cnVlXG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKHRleHQpIHtcbiAgICBjb3B5VGV4dCh0ZXh0KS50aGVuKHRyaWdnZXIpO1xuICB9IGVsc2UgaWYgKGlkKSB7XG4gICAgY29uc3Qgcm9vdCA9ICdnZXRSb290Tm9kZScgaW4gRWxlbWVudC5wcm90b3R5cGUgPyBidXR0b24uZ2V0Um9vdE5vZGUoKSA6IGJ1dHRvbi5vd25lckRvY3VtZW50O1xuICAgIGlmICghKHJvb3QgaW5zdGFuY2VvZiBEb2N1bWVudCB8fCAnU2hhZG93Um9vdCcgaW4gd2luZG93ICYmIHJvb3QgaW5zdGFuY2VvZiBTaGFkb3dSb290KSkgcmV0dXJuO1xuICAgIGNvbnN0IG5vZGUgPSByb290LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBpZiAobm9kZSkgY29weVRhcmdldChub2RlKS50aGVuKHRyaWdnZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvcHlUYXJnZXQoY29udGVudCkge1xuICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgY29udGVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcbiAgICByZXR1cm4gY29weVRleHQoY29udGVudC52YWx1ZSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ICYmIGNvbnRlbnQuaGFzQXR0cmlidXRlKCdocmVmJykpIHtcbiAgICByZXR1cm4gY29weVRleHQoY29udGVudC5ocmVmKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29weU5vZGUoY29udGVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xpY2tlZChldmVudCkge1xuICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gIGlmIChidXR0b24gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIGNvcHkoYnV0dG9uKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBrZXlkb3duKGV2ZW50KSB7XG4gIGlmIChldmVudC5rZXkgPT09ICcgJyB8fCBldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKGJ1dHRvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29weShidXR0b24pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmb2N1c2VkKGV2ZW50KSB7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd24pO1xufVxuXG5mdW5jdGlvbiBibHVycmVkKGV2ZW50KSB7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd24pO1xufVxuXG5jbGFzcyBDbGlwYm9hcmRDb3B5RWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tlZCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZvY3VzZWQpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGJsdXJyZWQpO1xuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgaWYgKCF0aGlzLmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGFzQXR0cmlidXRlKCdyb2xlJykpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgJyc7XG4gIH1cblxuICBzZXQgdmFsdWUodGV4dCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHRleHQpO1xuICB9XG5cbn1cblxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCdjbGlwYm9hcmQtY29weScpKSB7XG4gIHdpbmRvdy5DbGlwYm9hcmRDb3B5RWxlbWVudCA9IENsaXBib2FyZENvcHlFbGVtZW50O1xuICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdjbGlwYm9hcmQtY29weScsIENsaXBib2FyZENvcHlFbGVtZW50KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xpcGJvYXJkQ29weUVsZW1lbnQ7XG4iLCJjb25zdCBjb250cm9sbGVycyA9IG5ldyBXZWFrU2V0KCk7XG4vKlxuICogQmluZCBgW2RhdGEtYWN0aW9uXWAgZWxlbWVudHMgZnJvbSB0aGUgRE9NIHRvIHRoZWlyIGFjdGlvbnMuXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZChjb250cm9sbGVyKSB7XG4gICAgY29udHJvbGxlcnMuYWRkKGNvbnRyb2xsZXIpO1xuICAgIGlmIChjb250cm9sbGVyLnNoYWRvd1Jvb3QpXG4gICAgICAgIGJpbmRTaGFkb3coY29udHJvbGxlci5zaGFkb3dSb290KTtcbiAgICBiaW5kRWxlbWVudHMoY29udHJvbGxlcik7XG4gICAgbGlzdGVuRm9yQmluZChjb250cm9sbGVyLm93bmVyRG9jdW1lbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRTaGFkb3cocm9vdCkge1xuICAgIGJpbmRFbGVtZW50cyhyb290KTtcbiAgICBsaXN0ZW5Gb3JCaW5kKHJvb3QpO1xufVxuY29uc3Qgb2JzZXJ2ZXJzID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogU2V0IHVwIG9ic2VydmVyIHRoYXQgd2lsbCBtYWtlIHN1cmUgYW55IGFjdGlvbnMgdGhhdCBhcmUgZHluYW1pY2FsbHlcbiAqIGluamVjdGVkIGludG8gYGVsYCB3aWxsIGJlIGJvdW5kIHRvIGl0J3MgY29udHJvbGxlci5cbiAqXG4gKiBUaGlzIHJldHVybnMgYSBTdWJzY3JpcHRpb24gb2JqZWN0IHdoaWNoIHlvdSBjYW4gY2FsbCBgdW5zdWJzY3JpYmUoKWAgb24gdG9cbiAqIHN0b3AgZnVydGhlciBsaXZlIHVwZGF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5Gb3JCaW5kKGVsID0gZG9jdW1lbnQpIHtcbiAgICBpZiAob2JzZXJ2ZXJzLmhhcyhlbCkpXG4gICAgICAgIHJldHVybiBvYnNlcnZlcnMuZ2V0KGVsKTtcbiAgICBsZXQgY2xvc2VkID0gZmFsc2U7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiBtdXRhdGlvbi50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgYmluZEFjdGlvbnMobXV0YXRpb24udGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG11dGF0aW9uLmFkZGVkTm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kRWxlbWVudHMobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKGVsLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2RhdGEtYWN0aW9uJ10gfSk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZDtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgb2JzZXJ2ZXJzLmRlbGV0ZShlbCk7XG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIG9ic2VydmVycy5zZXQoZWwsIHN1YnNjcmlwdGlvbik7XG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbn1cbmZ1bmN0aW9uIGJpbmRFbGVtZW50cyhyb290KSB7XG4gICAgZm9yIChjb25zdCBlbCBvZiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWFjdGlvbl0nKSkge1xuICAgICAgICBiaW5kQWN0aW9ucyhlbCk7XG4gICAgfVxuICAgIC8vIEFsc28gYmluZCB0aGUgY29udHJvbGxlciB0byBpdHNlbGZcbiAgICBpZiAocm9vdCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgcm9vdC5oYXNBdHRyaWJ1dGUoJ2RhdGEtYWN0aW9uJykpIHtcbiAgICAgICAgYmluZEFjdGlvbnMocm9vdCk7XG4gICAgfVxufVxuLy8gQmluZCBhIHNpbmdsZSBmdW5jdGlvbiB0byBhbGwgZXZlbnRzIHRvIGF2b2lkIGFub255bW91cyBjbG9zdXJlIHBlcmZvcm1hbmNlIHBlbmFsdHkuXG5mdW5jdGlvbiBoYW5kbGVFdmVudChldmVudCkge1xuICAgIGNvbnN0IGVsID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgYmluZGluZ3MoZWwpKSB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBiaW5kaW5nLnR5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBlbC5jbG9zZXN0KGJpbmRpbmcudGFnKTtcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVycy5oYXMoY29udHJvbGxlcikgJiYgdHlwZW9mIGNvbnRyb2xsZXJbYmluZGluZy5tZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcltiaW5kaW5nLm1ldGhvZF0oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IGVsLmdldFJvb3ROb2RlKCk7XG4gICAgICAgICAgICBpZiAocm9vdCBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QgJiYgY29udHJvbGxlcnMuaGFzKHJvb3QuaG9zdCkgJiYgcm9vdC5ob3N0Lm1hdGNoZXMoYmluZGluZy50YWcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhZG93Q29udHJvbGxlciA9IHJvb3QuaG9zdDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNoYWRvd0NvbnRyb2xsZXJbYmluZGluZy5tZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRvd0NvbnRyb2xsZXJbYmluZGluZy5tZXRob2RdKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiogYmluZGluZ3MoZWwpIHtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdGlvbicpIHx8ICcnKS50cmltKCkuc3BsaXQoL1xccysvKSkge1xuICAgICAgICBjb25zdCBldmVudFNlcCA9IGFjdGlvbi5sYXN0SW5kZXhPZignOicpO1xuICAgICAgICBjb25zdCBtZXRob2RTZXAgPSBhY3Rpb24ubGFzdEluZGV4T2YoJyMnKTtcbiAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgdHlwZTogYWN0aW9uLnNsaWNlKDAsIGV2ZW50U2VwKSxcbiAgICAgICAgICAgIHRhZzogYWN0aW9uLnNsaWNlKGV2ZW50U2VwICsgMSwgbWV0aG9kU2VwKSxcbiAgICAgICAgICAgIG1ldGhvZDogYWN0aW9uLnNsaWNlKG1ldGhvZFNlcCArIDEpXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gYmluZEFjdGlvbnMoZWwpIHtcbiAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgYmluZGluZ3MoZWwpKSB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoYmluZGluZy50eXBlLCBoYW5kbGVFdmVudCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZC5qcy5tYXAiLCJjb25zdCBhdHRycyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIEF0dHIgaXMgYSBkZWNvcmF0b3Igd2hpY2ggdGFncyBhIHByb3BlcnR5IGFzIG9uZSB0byBiZSBpbml0aWFsaXplZCB2aWFcbiAqIGBpbml0aWFsaXplQXR0cnNgLlxuICpcbiAqIFRoZSBzaWduYXR1cmUgaXMgdHlwZWQgc3VjaCB0aGF0IHRoZSBwcm9wZXJ0eSBtdXN0IGJlIG9uZSBvZiBhIFN0cmluZyxcbiAqIE51bWJlciBvciBCb29sZWFuLiBUaGlzIG1hdGNoZXMgdGhlIGJlaGF2aW9yIG9mIGBpbml0aWFsaXplQXR0cnNgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXR0cihwcm90bywga2V5KSB7XG4gICAgaWYgKCFhdHRycy5oYXMocHJvdG8pKVxuICAgICAgICBhdHRycy5zZXQocHJvdG8sIFtdKTtcbiAgICBhdHRycy5nZXQocHJvdG8pLnB1c2goa2V5KTtcbn1cbi8qKlxuICogaW5pdGlhbGl6ZUF0dHJzIGlzIGNhbGxlZCB3aXRoIGEgc2V0IG9mIGNsYXNzIHByb3BlcnR5IG5hbWVzIChpZiBvbWl0dGVkLCBpdFxuICogd2lsbCBsb29rIGZvciBhbnkgcHJvcGVydGllcyB0YWdnZWQgd2l0aCB0aGUgYEBhdHRyYCBkZWNvcmF0b3IpLiBXaXRoIHRoaXNcbiAqIGxpc3QgaXQgZGVmaW5lcyBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBmb3IgZWFjaCBwcm9wZXJ0eSB0aGF0IG1hcCB0byBgZGF0YS0qYFxuICogYXR0cmlidXRlcyBvbiB0aGUgSFRNTEVsZW1lbnQgaW5zdGFuY2UuXG4gKlxuICogSXQgd29ya3MgYXJvdW5kIE5hdGl2ZSBDbGFzcyBQcm9wZXJ0eSBzZW1hbnRpY3MgLSB3aGljaCBhcmUgZXF1aXZhbGVudCB0b1xuICogY2FsbGluZyBgT2JqZWN0LmRlZmluZVByb3BlcnR5YCBvbiB0aGUgaW5zdGFuY2UgdXBvbiBjcmVhdGlvbiwgYnV0IGJlZm9yZVxuICogYGNvbnN0cnVjdG9yKClgIGlzIGNhbGxlZC5cbiAqXG4gKiBJZiBhIGNsYXNzIHByb3BlcnR5IGlzIGFzc2lnbmVkIHRvIHRoZSBjbGFzcyBib2R5LCBpdCB3aWxsIGluZmVyIHRoZSB0eXBlXG4gKiAodXNpbmcgYHR5cGVvZmApIGFuZCBkZWZpbmUgYW4gYXBwcm9wcmlhdGUgZ2V0dGVyL3NldHRlciBjb21ibyB0aGF0IGFsaWduc1xuICogdG8gdGhhdCB0eXBlLiBUaGlzIG1lYW5zIGNsYXNzIHByb3BlcnRpZXMgYXNzaWduZWQgdG8gTnVtYmVycyBjYW4gb25seSBldmVyXG4gKiBiZSBOdW1iZXJzLCBhc3NpZ25lZCB0byBCb29sZWFucyBjYW4gb25seSBldmVyIGJlIEJvb2xlYW5zLCBhbmQgYXNzaWduZWQgdG9cbiAqIFN0cmluZ3MgY2FuIG9ubHkgZXZlciBiZSBTdHJpbmdzLlxuICpcbiAqIFRoaXMgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgYXMgcGFydCBvZiBgQGNvbnRyb2xsZXJgLiBJZiBhIGNsYXNzIHVzZXMgdGhlXG4gKiBgQGNvbnRyb2xsZXJgIGRlY29yYXRvciBpdCBzaG91bGQgbm90IGNhbGwgdGhpcyBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVBdHRycyhpbnN0YW5jZSwgbmFtZXMpIHtcbiAgICBpZiAoIW5hbWVzKVxuICAgICAgICBuYW1lcyA9IGF0dHJzLmdldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdGFuY2UpKSB8fCBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBuYW1lcykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGluc3RhbmNlW2tleV07XG4gICAgICAgIGNvbnN0IG5hbWUgPSBhdHRyVG9BdHRyaWJ1dGVOYW1lKGtleSk7XG4gICAgICAgIGxldCBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKSB8fCAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBuZXdWYWx1ZSB8fCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmdldEF0dHJpYnV0ZShuYW1lKSB8fCAwKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgZGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUF0dHJpYnV0ZShuYW1lLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdGFuY2UsIGtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgIGlmIChrZXkgaW4gaW5zdGFuY2UgJiYgIWluc3RhbmNlLmhhc0F0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbChpbnN0YW5jZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0clRvQXR0cmlidXRlTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIGBkYXRhLSR7bmFtZS5yZXBsYWNlKC8oW0EtWl0oJHxbYS16XSkpL2csICctJDEnKX1gLnJlcGxhY2UoLy0tL2csICctJykudG9Mb3dlckNhc2UoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPYnNlcnZlZEF0dHJpYnV0ZXMoY2xhc3NPYmplY3QpIHtcbiAgICBsZXQgb2JzZXJ2ZWQgPSBjbGFzc09iamVjdC5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgW107XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsYXNzT2JqZWN0LCAnb2JzZXJ2ZWRBdHRyaWJ1dGVzJywge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyTWFwID0gYXR0cnMuZ2V0KGNsYXNzT2JqZWN0LnByb3RvdHlwZSk7XG4gICAgICAgICAgICBpZiAoIWF0dHJNYXApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVkO1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJNYXAubWFwKGF0dHJUb0F0dHJpYnV0ZU5hbWUpLmNvbmNhdChvYnNlcnZlZCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldChhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBvYnNlcnZlZCA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF0dHIuanMubWFwIiwiaW1wb3J0IHtjb250cm9sbGVyfSBmcm9tICdAZ2l0aHViL2NhdGFseXN0J1xuXG5AY29udHJvbGxlclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVsbG9Xb3JsZEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuaW5uZXJIVE1MID0gJ0hlbGxvIFdvcmxkISdcbiAgICBjb25zb2xlLmxvZyhcImhlbGxsbG9vb29vb29vbyDwn5GLXCIpXG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZ2lzdGVyIH0gZnJvbSAnLi9yZWdpc3Rlci5qcyc7XG5pbXBvcnQgeyBiaW5kLCBiaW5kU2hhZG93IH0gZnJvbSAnLi9iaW5kLmpzJztcbmltcG9ydCB7IGF1dG9TaGFkb3dSb290IH0gZnJvbSAnLi9hdXRvLXNoYWRvdy1yb290LmpzJztcbmltcG9ydCB7IGRlZmluZU9ic2VydmVkQXR0cmlidXRlcywgaW5pdGlhbGl6ZUF0dHJzIH0gZnJvbSAnLi9hdHRyLmpzJztcbi8qKlxuICogQ29udHJvbGxlciBpcyBhIGRlY29yYXRvciB0byBiZSB1c2VkIG92ZXIgYSBjbGFzcyB0aGF0IGV4dGVuZHMgSFRNTEVsZW1lbnQuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgYHJlZ2lzdGVyKClgIHRoZSBjb21wb25lbnQgaW4gdGhlIGN1c3RvbUVsZW1lbnRcbiAqIHJlZ2lzdHJ5LCBhcyB3ZWxsIGFzIGVuc3VyaW5nIGBiaW5kKHRoaXMpYCBpcyBjYWxsZWQgb24gYGNvbm5lY3RlZENhbGxiYWNrYCxcbiAqIHdyYXBwaW5nIHRoZSBjbGFzc2VzIGBjb25uZWN0ZWRDYWxsYmFja2AgbWV0aG9kIGlmIG5lZWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRyb2xsZXIoY2xhc3NPYmplY3QpIHtcbiAgICBjb25zdCBjb25uZWN0ID0gY2xhc3NPYmplY3QucHJvdG90eXBlLmNvbm5lY3RlZENhbGxiYWNrO1xuICAgIGNsYXNzT2JqZWN0LnByb3RvdHlwZS5jb25uZWN0ZWRDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVBdHRyaWJ1dGUoJ2RhdGEtY2F0YWx5c3QnLCB0cnVlKTtcbiAgICAgICAgYXV0b1NoYWRvd1Jvb3QodGhpcyk7XG4gICAgICAgIGluaXRpYWxpemVBdHRycyh0aGlzKTtcbiAgICAgICAgYmluZCh0aGlzKTtcbiAgICAgICAgaWYgKGNvbm5lY3QpXG4gICAgICAgICAgICBjb25uZWN0LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QpXG4gICAgICAgICAgICBiaW5kU2hhZG93KHRoaXMuc2hhZG93Um9vdCk7XG4gICAgfTtcbiAgICBkZWZpbmVPYnNlcnZlZEF0dHJpYnV0ZXMoY2xhc3NPYmplY3QpO1xuICAgIHJlZ2lzdGVyKGNsYXNzT2JqZWN0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2xsZXIuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGF1dG9TaGFkb3dSb290KGVsZW1lbnQpIHtcbiAgICBmb3IgKGNvbnN0IHRlbXBsYXRlIG9mIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGVbZGF0YS1zaGFkb3dyb290XScpKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZS5wYXJlbnRFbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAgICAgLmF0dGFjaFNoYWRvdyh7XG4gICAgICAgICAgICAgICAgbW9kZTogdGVtcGxhdGUuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYWRvd3Jvb3QnKSA9PT0gJ2Nsb3NlZCcgPyAnY2xvc2VkJyA6ICdvcGVuJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dG8tc2hhZG93LXJvb3QuanMubWFwIiwiLyoqXG4gKiBSZWdpc3RlciB0aGUgY29udHJvbGxlciBhcyBhIGN1c3RvbSBlbGVtZW50LlxuICpcbiAqIFRoZSBjbGFzc25hbWUgaXMgY29udmVydGVkIHRvIGEgYXBwcm9yaWF0ZSB0YWcgbmFtZS5cbiAqXG4gKiBFeGFtcGxlOiBIZWxsb0NvbnRyb2xsZXIgPT4gaGVsbG8tY29udHJvbGxlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIoY2xhc3NPYmplY3QpIHtcbiAgICBjb25zdCBuYW1lID0gY2xhc3NPYmplY3QubmFtZVxuICAgICAgICAucmVwbGFjZSgvKFtBLVpdKCR8W2Etel0pKS9nLCAnLSQxJylcbiAgICAgICAgLnJlcGxhY2UoLyheLXwtRWxlbWVudCQpL2csICcnKVxuICAgICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXdpbmRvdy5jdXN0b21FbGVtZW50cy5nZXQobmFtZSkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHdpbmRvd1tjbGFzc09iamVjdC5uYW1lXSA9IGNsYXNzT2JqZWN0O1xuICAgICAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5hbWUsIGNsYXNzT2JqZWN0KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWdpc3Rlci5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9